# 年輕人提示器APP
一款基於Android原生開發的應用程式使用提醒工具，核心透過**無障礙服務**監控使用者指定的APP啟動行為，即時推送自訂提醒通知，幫助用戶控制應用程式使用時長，告別沉迷於手機。

## 核心功能
1. **自訂提醒語**：輸入專屬提示訊息，儲存後即時生效，支援清空重輸
2. **APP批量選擇**：載入手機已安裝的所有可啟動APP，支援關鍵字搜尋篩選
3. **指定APP監控**：勾選需要提醒的APP，儲存後無障礙服務將監控其啟動行為
4. **即時通知推播**：開啟指定APP時，立即推播高優先權通知（附震動+提示音）
5. **防重複提醒**：6秒內重複開啟同一APP不重複觸發通知，避免騷擾
6. **權限引導**：首次啟動自動開機開啟無障礙服務/通知權限，含詳細操作提示
7. **狀態提醒**：返回APP時偵測權限狀態，未開啟則輕量提示
8. **沉浸式佈局**：適合Android EdgeToEdge，視覺體驗更優

## 開發環境
- 開發工具：Android Studio（建議2022.1.1以上）
- 開發語言：Java
- 最低相容版本：Android 5.0（API 21，覆蓋99%以上裝置）
- 核心依賴：AndroidX、RecyclerView、ConstraintLayout、AppCompat

## 核心技術點
1. **無障礙服務（AccessibilityService）**：監控系統視窗狀態變化，取得前台運行APP包名
2. **PackageManager**：取得已安裝APP的圖示、名稱、套件名稱等資訊
3. **RecyclerView+自訂Adapter**：實作APP清單載入、篩選、勾選狀態管理
4. **SharedPreferences**：持久化儲存提醒語、勾選的APP套件名稱、權限引導狀態
5. **通知頻道（NotificationChannel）**：適配Android 8.0+通知權限，支援震動/提示音配置
6. **動態權限申請**：適配Android 13+（TIRAMISU）POST_NOTIFICATIONS通知權限
7. **文字監聽（TextWatcher）**：實現APP列表即時搜尋篩選
8. **AlertDialog**：實現無障礙服務開啟的強制引導彈窗

## 專案結構
以下是目前主要檔案與目錄的簡要說明：
```text
com.example.reminderapp/
├── MainActivity.java                    # 主頁面核心邏輯（權限、列表、事件、通知）
├── ReminderAccessibilityService.java    # 無障礙服務（監控前景 App、觸發通知）
├── AppRecyclerAdapter.java              # RecyclerView 適配器（列表顯示、搜尋、勾選）
└── res/
    └── layout/
        ├── activity_main.xml            # 主頁面布局（輸入框 + 搜尋 + 清單 + 按鈕）
        └── app_list_item.xml            # 列表單項布局（圖示 + 名稱 + 勾選框）
```

## 關鍵權限說明
此APP的核心功能依賴2個必選權限，均會自動引導開啟：
1. **無障礙服務**：用於監控APP啟動行為，無此權限則無法實現提醒功能
2. **通知權限**：用於推播提醒通知，Android 13+需手動申請，低版本預設開啟

### 權限開啟步驟
1. **無障礙服務**：首頁引導彈出式 → 前往設定 → 找到「年輕人提示器/ReminderAccessibilityService」→ 開啟
2. **通知權限**：彈跳窗提示 → 點選允許，或前往手機設定-應用程式-年輕人提示器-通知 → 開啟

## 使用方法
### 首次使用
1. 開啟APP，彈出「無障礙服務引導彈出視窗」，點選「前往設定」按下提示開啟權限，返回APP
2. 若為Android 13+，彈出通知權限申請，點選「允許」
3. 在「請輸入提示資訊！！!」輸入框中填寫專屬提醒語，點選「提示訊息」按鈕儲存
4. 在APP清單中勾選需要監控的應用程式（可透過頂部搜尋框快速找到），點選「選擇App」按鈕儲存

### 日常使用
1. 開啟已勾選的APP，立即收到「提提你 !!!」通知，點選通知可返回本APP
2. 如需修改提醒語：重新輸入後​​點選「提示訊息」即可覆蓋儲存
3. 如需修改監控APP：重新勾選後點選「選擇App」即可覆寫儲存
4. 若關閉了權限，返回APP時會收到Toast提示，可重新前往設定開啟

## 核心邏輯說明
### 1. APP監控邏輯
無障礙服務啟動 → 監聽視窗狀態變更（TYPE_WINDOW_STATE_CHANGED）→ 取得前台 APP 套件名稱 → 符合已勾選套件名稱 → 6 秒內未觸發則推播通知
### 2. 通知觸發限制
設定6秒最小間隔（MIN_GAP_MS），透過`lastTriggerTime`記錄上次觸發時間，避免短時間內重複開啟相同APP導致通知轟炸。
### 3. 資料持久化
所有設定資訊透過`SharedPreferences`儲存在「reminder_prefs」檔案中，包括：
- 自訂提醒語（reminder_message）
- 勾選的APP包名集合（selected_pa​​ckages）
- 無障礙服務首次引導狀態（first_time_accessibility）

## 介面說明
### 主頁面
1. 頂部標題：年輕人提示器（50dp粗體，居中顯示）
2. 提醒語輸入框：79dp高度，佔位符提示輸入，支援多行
3. 搜尋框：附自訂背景，輸入關鍵字即時篩選APP列表
4. APP清單：RecyclerView展示，含APP圖示、名稱、複選框，點選整行切換勾選狀態
5. 底部按鈕列：
- 提示訊息：儲存自訂提醒語，清空輸入框
- 選擇App：儲存勾選的APP，提示儲存數量
6. 載入進度條：載入APP清單時顯示，完成後隱藏

### APP列表子項
- 左側：48dp×48dp APP原生圖標，等比縮放
- 中：APP名稱（18sp，黑色），佔滿剩餘寬度
- 右側：複選框（不可單獨點擊，隨整行切換狀態）

## 注意事項
1. 無障礙服務開啟後，若手機清理後台可能導致服務中斷，建議將APP加入「後台保護/白名單」
2. 通知權限未開啟時，監控功能正常運作但無提醒通知
3. 本APP僅監控指定APP的啟動行為，不收集任何使用者隱私數據，所有設定均儲存於本地
4. 6秒防重複提醒間隔為固定值，如需修改可調整程式碼中`MIN_GAP_MS`參數（單位：毫秒）
5. 通知圖示使用應用程式原生前景圖示（ic_launcher_foreground），可自行取代res/drawable下的圖示文件
